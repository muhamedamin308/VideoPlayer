{"version":3,"file":"react-youtube-lite.cjs.development.js","sources":["../src/index.tsx"],"sourcesContent":["// Dependencies\nimport * as React from 'react';\n\n// Styles\nimport './styles/styles.css';\n\nexport interface Props {\n  /**\n   * If `https://static.doubleclick.net` is enabled or not\n   *\n   * @default true\n   */\n  adNetwork?: boolean;\n  /**\n   * The URL of the video in any format like youtube.com or youtu.be\n   * we take care of get the ID of the video\n   */\n  url: string;\n  /**\n   * If the video URL contains a playlist or not\n   *\n   * @default false\n   */\n  playlist?: boolean;\n  /**\n   * The different quality to show the poster\n   * see: https://developers.google.com/youtube/v3/docs/thumbnails\n   * for more information\n   *\n   * @default \"hqdefault\"\n   */\n  poster?:\n    | 'maxresdefault'\n    | '0'\n    | '1'\n    | '2'\n    | '3'\n    | 'default'\n    | 'hqdefault'\n    | 'mqdefault'\n    | 'sddefault';\n  /**\n   * The `data-title` to insert in the `iframe`\n   *\n   * @default \"React YouTube Lite\"\n   */\n  title?: string;\n  /**\n   * If you use GDPR and don't want YouTube cookies enable this option\n   *\n   * @default false\n   */\n  noCookie?: boolean;\n  /**\n   * The class used to hide the elements when the iframe is already renderer\n   *\n   * @default \"lty-playbt\"\n   */\n  activatedClass?: string;\n  /**\n   * Default classes to put iframe responsive\n   *\n   * @default \"embed-reponsive-item\"\n   */\n  iframeClass?: string;\n  /**\n   * Class for youtube play button\n   *\n   * @default \"lty-playbtn\"\n   */\n  playerClass?: string;\n  /**\n   * Default classes to put container responsive\n   *\n   * @default \"ryt-lite embed-responsive\"\n   */\n  wrapperClass?: string;\n  /**\n   * Implements a `padding-bottom` to generate the size of the iframe\n   *\n   * - `aspect-ratio-none`: 0\n   * - `aspect-ratio-square`: 100%\n   * - `aspect-ratio-16/9`: 56.25%\n   * - `aspect-ratio-4/3`: 75%\n   * - `aspect-ratio-21/9`: 42.86%\n   *\n   * @default \"aspect-ratio-16/9\"\n   */\n  aspectRatio?:\n    | 'aspect-ratio-none'\n    | 'aspect-ratio-square'\n    | 'aspect-ratio-16/9'\n    | 'aspect-ratio-4/3'\n    | 'aspect-ratio-21/9';\n}\n\n/**\n * Returns the ID of the youtube video url provided\n *\n * @param url - The URL of the video (we take care of )\n */\nexport function getYoutubeId(url: string): string {\n  const regExp = /^.*((youtu.be\\/)|(v\\/)|(\\/u\\/\\w\\/)|(embed\\/)|(watch\\?))\\??v?=?([^#&?]*).*/;\n  const match = url.match(regExp);\n\n  return match && match[7].length === 11 ? match[7] : '';\n}\n\n/**\n * Render faster YouTube videos to get a high score page render\n */\nexport const ReactYouTubeLite = ({\n  adNetwork = true,\n  url = '',\n  playlist = false,\n  poster = 'hqdefault',\n  title = 'React YouTube Lite',\n  noCookie = false,\n  activatedClass = 'lyt-activated',\n  iframeClass = 'embed-responsive-item',\n  playerClass = 'lty-playbtn',\n  wrapperClass = 'ryt-lite embed-responsive',\n  aspectRatio = 'aspect-ratio-16/9',\n}: Props): JSX.Element => {\n  const [preconnected, setPreconnected] = React.useState(false);\n  const [iframe, setIframe] = React.useState(false);\n  const videoId = encodeURIComponent(getYoutubeId(url));\n  const videoTitle = title;\n  const posterUrl = `https://i.ytimg.com/vi/${videoId}/${poster}.jpg`;\n  const ytUrl = noCookie\n    ? 'https://www.youtube-nocookie.com'\n    : 'https://www.youtube.com';\n  const iframeSrc = !playlist\n    ? `${ytUrl}/embed/${videoId}?autoplay=1`\n    : `${ytUrl}/embed/videoseries?list=${videoId}`;\n\n  /**\n   * Preload google `link` in header\n   */\n  const warmConnections = () => {\n    if (preconnected) return;\n\n    setPreconnected(true);\n  };\n\n  /**\n   * Set iframe as active if already active, return.\n   */\n  const addIframe = () => {\n    if (iframe) return;\n\n    setIframe(true);\n  };\n\n  return (\n    <>\n      <link rel=\"preload\" href={posterUrl} as=\"image\" />\n      <>\n        {preconnected && (\n          <>\n            <link rel=\"preconnect\" href={ytUrl} />\n            <link rel=\"preconnect\" href=\"https://www.google.com\" />\n            {adNetwork && (\n              <>\n                <link rel=\"preconnect\" href=\"https://static.doubleclick.net\" />\n                <link\n                  rel=\"preconnect\"\n                  href=\"https://googleads.g.doubleclick.net\"\n                />\n              </>\n            )}\n          </>\n        )}\n      </>\n      <div\n        onPointerOver={warmConnections}\n        onClick={addIframe}\n        className={`${wrapperClass} ${aspectRatio} ${\n          iframe ? activatedClass : ''\n        }`}\n        data-title={videoTitle}\n        style={{ backgroundImage: `url(${posterUrl})` }}\n      >\n        <div className={playerClass}></div>\n        {iframe && (\n          <iframe\n            className={iframeClass}\n            title={videoTitle}\n            width=\"560\"\n            height=\"315\"\n            frameBorder=\"0\"\n            allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n            src={iframeSrc}\n          ></iframe>\n        )}\n      </div>\n    </>\n  );\n};\n"],"names":["getYoutubeId","url","regExp","match","length","ReactYouTubeLite","adNetwork","playlist","poster","title","noCookie","activatedClass","iframeClass","playerClass","wrapperClass","aspectRatio","React","useState","preconnected","setPreconnected","iframe","setIframe","videoId","encodeURIComponent","videoTitle","posterUrl","ytUrl","iframeSrc","warmConnections","addIframe","rel","href","as","onPointerOver","onClick","className","style","backgroundImage","width","height","frameBorder","allow","allowFullScreen","src"],"mappings":"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"}